C51 COMPILER V9.00   UART                                                                  07/09/2011 17:21:28 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE UART
OBJECT MODULE PLACED IN .\temp\uart.obj
COMPILER INVOKED BY: G:\Keil 4 C51\C51\BIN\C51.EXE src\uart.c BROWSE INCDIR(.\inc;.\inc\xlib;.\inc\kernel) DEBUG OBJECTE
                    -XTEND PRINT(.\temp\uart.lst) OBJECT(.\temp\uart.obj)

line level    source

   1          /*
   2           * uart.c
   3           */
   4          /**
   5           * 初始化定时器1和串口通讯
   6           * 8bit数据,无奇偶校验,1停止位
   7           * */
   8          #include "uart.h"
   9          #include <reg52.h>
  10          void init_uart(unsigned char th, unsigned char smod)
  11          {
  12   1              TMOD = (TMOD & ~0xf0) | 0x20; //定时器1.工作方式2
  13   1              TH1 = th;
  14   1              TL1 = th; //波特率为9.6K
  15   1      
  16   1              SCON = 0x50; //工作方式1.允许接收.SM2=0;
  17   1              PCON &= (0xef + smod);
  18   1      
  19   1              EA = 1; //全局中断开
  20   1      
  21   1              TR1 = 1; //启动定时器1
  22   1              ES = 1; //允许串口中断
  23   1      }
  24          /**
  25          void com_uart(void) interrupt 4
  26          {
  27                  uchar str;
  28                  ES=0;
  29                  /*                      接收数据中断                                            *
  30                  if(RI)
  31                  {
  32                          str=SBUF;
  33                          RI=0;
  34                          P0=str;
  35                  }
  36                  /*          发送数据中断                        *
  37                  if(TI)
  38                  {
  39                          TI=0;
  40                  }
  41                  ES=1;
  42          }
  43           * */


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     27    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.

C51 COMPILER V9.00   UART                                                                  07/09/2011 17:21:28 PAGE 2   


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
